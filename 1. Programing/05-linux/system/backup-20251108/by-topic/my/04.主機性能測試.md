### CPU 測試
##### 性能測試
```shell
geekbench
```

##### 壓力測試
```shell
# 使用 4 核心進行 CPU 壓力測試 60 秒
stress --cpu 16 --timeout 60

# 使用 stress-ng，更多控制
stress-ng --cpu 16 --cpu-method matrixprod --timeout 60s
```
> 背景監測工具：`iostat -c`, `htop`

| cpu method   | 說明     |
| ------------ | ------ |
| `matrixprod` | 矩陣乘法運算 |
| `sqrt`       | 平方根    |
| `prime`      | 質數     |

### 記憶體測試
##### 壓力測試
```shell
# 使用 2GB 記憶體進行壓力測試 60 秒
stress --vm 1 --vm-bytes 10G --timeout 60
```
> 背景監測工具：`vmstat`, `htop`
> 注意：不要操作系統的 80% 不然會 OOM


### 硬碟I/O測試

```shell
# 隨機讀寫測試
fio --name=randreadwrite --ioengine=libaio --rw=randrw --bs=4k --size=10G --numjobs=4 --runtime=60 --group_reporting --direct=1 --iodepth=16 --directory=/home

# 順序寫入測試
fio --name=seqwrite --ioengine=libaio --rw=write --bs=1M --size=10G --numjobs=1 --runtime=60 --group_reporting --direct=1 --iodepth=16 --directory=/home

# 順序讀取測試
fio --name=seqread --ioengine=libaio --rw=read --bs=1M --size=10G --numjobs=1 --runtime=60 --group_reporting --direct=1 --iodepth=16 --directory=/home
```
> 背景監測工具：`iostat`

| 參數                  | 說明                                                    |
| ------------------- | ----------------------------------------------------- |
| `--name`            | 測試名稱                                                  |
| `--ioengine`        | I/O 引擎，如 `sync`, `libaio`, `mmap`, `pvsync` 等         |
| `--rw`              | I/O 模式：`read`、`write`、`randread`、`randwrite`、`randrw` |
| `--bs`              | block size，單位 byte，K、M 可用                             |
| `--size`            | 每個 job 操作的檔案大小                                        |
| `--numjobs`         | 同時運行 job 的數量                                          |
| `--runtime`         | 運行時間                                                  |
| `--group_reporting` | 聚合輸出各 job 的統計數據                                       |
| `--direct=1`        | 避免 OS 快取，直接對磁碟操作                                      |
| `--iodepth`         | 單隊列深度，增加 iodepth 可以提升 SSD IOPS                        |


### 網路測試

### 綜合測試
1. `stree-ng`
```shell
# CPU 4 核心 + 記憶體 1GB + I/O 壓力 2 個
stress-ng --cpu 4 --vm 1 --vm-bytes 1G --io 2 --timeout 60s
```

2. `sysbench`
```shell
# CPU 測試
sysbench cpu --threads=4 --time=60 run

# 記憶體測試
sysbench memory --threads=4 --time=60 run

# 文件 I/O 測試
sysbench fileio --file-total-size=1G --time=60 --threads=4 prepare
sysbench fileio --file-total-size=1G --time=60 --threads=4 run
sysbench fileio --file-total-size=1G cleanup
```
