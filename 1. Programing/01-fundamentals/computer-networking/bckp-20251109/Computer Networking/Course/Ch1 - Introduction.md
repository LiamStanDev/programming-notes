# 基本概念
---
### Network
網路是由多個node(節點)和與之連接的link(鏈路)組成。
* Node: 可以是電腦、手機與路由器等
* link: 表示物理管線或者無線設施(wifi等)

### Internet
網際網路就是世界上最大的Network。

### ISP (Internet Service Provider)
表示提供網路服務的提供商，如中華電信、遠傳電信等。
提供主要服務如下：
1. 物理上連網設備：有線與無線網路基礎設施。
2. 域名解析(DNS)
3. IP地址分配

### 網路提供的功能
1. 數據通信：將數據送上路
2. 資源共享：數據封裝與處理，對應不同的協議。

### 網路分類
#### 按地裡位置
1. WAN (Wide Area Network) : 跨國際的計算機網路
2. MAN (Metropolitan Area Network) : 覆蓋城市或都會區域的計算機網絡
3. LAN (Local Area Network) : 用於辦公室、學校、家庭等
5. PAN (Personal Area Network) : 通常用於連接個人設備，例如智能手機、平板電腦、藍牙耳機等
#### 按照交換技術
1. 電路交換（Circuit Switching）:
	通信連接在通信開始之前建立並**保持固定的連接狀態**，直到通信結束。當兩個設備要進行通信時，它們會建立一條專用的物理或虛擬通路，以便數據可以順利傳輸。在通信過程中，整個連接將保持不變，無論是否傳輸數據，連接都會**佔用帶寬**。
2. 封包交換（Packet Switching）
	數據在傳輸之前被**拆分成小的數據包**（封包），每個封包包含數據以及源和目的地的地址信息。這些封包獨立地傳輸到目的地，並在接收端重新組裝成完整的數據。根據網絡的實際情況**動態分配帶寬**。
🔥 **網路傳輸是使用Packet Switching**，Circuit Switching適用於撥號網路與電話。

### 網路性能指標
1. rate: 表示實際上在網路傳送數據的速度
	* 單位：b/s, kb/s, Mb/s, Gb/s, Tb/s
> 注意這邊的 1 kb/s = 1000 b/s，與容量使用的 1 KB = $2^{10}$ B = 1024 B 不同
> B = byte, b = bit
2. bandwidth: 只單位時間理論上能向鏈路傳遞多少數據，也就是rate的最大值
> 雖然bandwidth很高，但由可能因為另外一台主機接收速度，或者其他鏈路bandwith太小，導致rate較低。
5. Delay: 延遲時間來自於
	1. Transimition Delay: 主機發送到信號通道
	2. Propagation Delay: 數據在傳輸媒介中傳播
	3. Queuing Delay: 數據包在路由器或交換機的緩存隊列中排隊
	4. Processing Delay: 網絡設備對數據進行緩存、檢查錯誤、查找最佳路徑等
6. RTT (Round Trip Time): 送方發送數據開始，到發送方接受到接收方的確認總經歷的時間。**可以用ping命令看到**。
8. Usage: 數據通道有數據通過的時間佔整體時間的比例。

# 分層結構
---
## 基本概念
### 分層
* entity (實體): 表示在第n層的活動元素。
* protocol (協議)：等實體數據交換而建立的規則、標準或約定如下
	* 語法：規定數據的格式，以及如何分段
	* 語意：規定各段的功能
	* 同步：規定各種操作的順序 e.g.哪個數據包先發與後發
* interface (接口)：上層使用下層服務的入口
* service (服務)：下層為上層提供的功能調用
### 信息
- SDU：為服務數據單元，為完成用戶所要求的功能而傳遞的數據
- PCI：為協議操作的信息。
- PDU：為協議數據單元（PCI+SDU），對等層次間傳送的數據單位

## OSI參考模型
![[Untitled(7).png]]
### 物理層（Physical Layer）
負責傳輸原始比特流，即0和1，通過傳輸介質，如電纜、光纖或無線信號，傳輸單位是bit。
功能如下：
1. 定義物理接口
2. 定義傳輸模式：單向or雙向
3. 定義傳輸速率
4. bit同步
5. bit編碼：要怎麼用電壓表示0、1
🔥 主要協議：Rj45、802.3
    
### 數據鏈路層（Data Link Layer）
主要任務是把網路層傳下來的**數據報組裝成幀**(Frame)，傳輸單位為幀。
功能如下：
1. 成幀：定義幀的開始與結束
2. 差錯控制：幀錯＋位錯
3. 流量控制
4. 訪問控制
🔥 主要協議：SDLC、HDLC、PPP、STP
    
### 網絡層（Network Layer）
又稱為IP層，主要任務是把分組從發送端傳送到目的端。傳輸單位為報文，當報文過大時會進行分組。
功能如下：
1. 路由選擇
2. 流量控制：匹配兩端傳輸與接收速率，告訴發送端是否該減緩發送速度
3. 差錯控制
4. 雍塞控制：當**所有的節點**都來不及接收分組的話就會出現擁塞，需要採取的措施
🔥 主要協議：IP、IPX、ICMP、IGMP、ARP等
    
### 傳輸層（Transport Layer）
提供端到端的數據傳輸服務。傳輸單位為報文段
功能如下：
1. 可靠傳輸、不可靠傳輸：是否每一個報文段都會確認是否接收與是否建立連接
2. 差錯控制
3. 流量控制：匹配兩端傳輸與接收速率，告訴發送端是否該減緩發送速度
4. 復用分用：表示當多個不同進程數據傳輸到接收方，解析端口號並分配給對應進程
🔥 主要協議如：TCP、UDP
    
### 會話層（Session Layer）
管理兩個應用程序之間的會話，提供會話的建立、管理和終止，使用校驗點使通信失效時從校驗點繼續恢復通信，**向用戶進程提供建立連接並在連接上有序的傳輸數據（建立同步SYN）**。🔥 主要協議如ADSP、ASP。
    
### 表示層（Presentation Layer）
負責數**據格式轉換**（不同主機的解釋方式不同）、**加密和解密**，**壓縮與解壓縮**，確保兩個應用程序之間能夠理解對方的數據格式。
🔥 主要協議如JPEG、ASCII。
    
### 應用層（Application Layer）
提供應用程序間的通信服務，並支持特定的應用協議，
🔥 主要協議HTTP、FTP、SMTP等。

### 總結
- 上面四層是**端到端的通信**
- 下面三層是**點到點傳輸**


## TCP/IP參考模型
TCP/IP是事實標準，其實本身是透過定義協議的方式形成協議棧，在經過分析形成TCP/IP參考模型。
![[Untitled(8).png]]
### 兩者差別
1. TCP/IP考慮不同主機架構不同的問題，**將IP作為重要層次**
2. 網路層：
    1. OSI模型：無連接＋面向連接
    2. TCP/IP：無連接（IP協議）
3. 傳輸層：
    1. OSI模型：面向連接
    2. TCP/IP：無連接＋面向連接


## 5層參考模型
綜合OSI與TCP/IP的優點
![[Untitled(9).png]]
👻 勘誤：上面網路接口層應為物理層
### 應用層
支持各種網路應用 e.g. FTP、SMTP、HTTP
### 傳輸層
進程與進程的數據傳輸e.g. TCP、UDP
### 網路層
發送主機到目的主機的數據分組與轉發 e.g. IP、ICMP、OSPF等
### 數據鏈路層
把網路層傳下來的數據報裝成幀 e.g. Ethernet、PPP
### 物理層
bit傳輸