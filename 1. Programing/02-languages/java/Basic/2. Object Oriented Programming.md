# static variable 與 static method
---
### 類變量
又稱為靜態變量/靜態屬性，是整個類共享的變量。
- 希望一個變量或方法能**在相同類的對象之間共享**，e.g.該創建該類的次數
- 類變量的**生命週期隨類加載開始**，隨著類消亡而銷燬
- 可以使用類名調用變量方便傳遞 (對象是存在堆內存)
##### static變量存放在哪？
Ans: 在java8之後是存放在堆中(C++放在.text)，隨著類加載創建，由該類所有對象共享。


### 類方法
又稱為靜態方法，不屬於特定實例。
* 為static方法表示靜態綁定，與該類有關，故該方法是**無法被重寫**
* 類方法與普通方法都是隨著類加載而加載，將結構信息存放在方法區
* 類方法無法訪問普通方法

# 代碼塊
---
### 普通代碼塊
稱為對象初始化塊，優先於構造函數，沒有參數與返回值得方法體，隨著對象創建而調用。
#### 使用時機
當有多個構造函數都有相同的部分時，可以提取出來放在代碼塊中。

### 靜態代碼塊
又稱為類初始化塊，隨著**類加載**被調用，整個程序中只會被調用一次。

### 類加載
類加載為是一個類的資訊被讀入內存，並放在靜態區，生命週期為整個程序時間，只會被調用一次，調用時機為:
1. 該類對象第一次被創建(new)時。
2. 創建子類對象，父類也會被加載。
3. 使用靜態成員時。
![[Screen Shot 2022-10-09 at 11.28.54 AM.png|500]]

# final 
---
final 關鍵字可以用來修飾，class, property, field, method, and local variable。
含意如下:
1. 用在class: 表示該類不能被繼承
2. 用在method: 表示該方法不能重寫
> C++ const 方法表示該方法部會修改類的成員，用於只讀函數。
4. 用在property or fied: 表示const
5. 用在local variable: 表示const

### 使用細節
1. final class 所有方法都是 final 的，沒有必要在方法中添加final
2. final + static 有底層優化，使用該屬性不會導致類的加載。
3. final 不能修飾構造函數
4. 包裝類都是 final 類，如 String, Integer, Double...

# abstract 
---
用於修飾類與方法，表示該類需要被子類繼承然後實現其未實現的方法，用於設計子類架構。
案例如下:
```java
package com.liam;  
  
public abstract class Employee {  
    private String name;  
    private int id;  
    private double salary;  
  
    public Employee(String name, int id, double salary) {  
        this.name = name;  
        this.id = id;  
        this.salary = salary;  
    }  
	// abstract method
    public abstract void work();  
	// normal method
    public String getName() {  
        return name;  
    }  
}
```


# interface
---
接口用於定義行為，用於作為介面之間的溝通使用。
### 細節
1. 接口的方法不用寫上 abstract ，因為接口默認方法都是 abstract
2. 可以有方法體方式如下:
	1. 使用 static 修飾: 表示子類能修改
	2. 使用 default 修飾: 表示默認實現，但子類可以修改
3. 接口的方法都是 public
4. 接口可以有屬性，但是只能是public static final的

# 內部類 - inner class
---
表示類中還有一個類，為類的成員之一。有以下種類:
1. 定義在方法中: 類在方法體中。
	1. 局部內部類
	2. 匿名內部類
2. 定義在類成員中: 類在外部類的定義成員的位置。
	1. 靜態內部類
	2. 成員內部類

### 局部內部類
1. 不能添加訪問修飾符，因為只能在方法體中使用。
2. 可以訪問外部類所有的成員
	1. 沒有成重名: 直接調用
	2. 有重名非靜態: **`外部類名.this.成員名`**
	3. 有重名靜態: **`外部類名.成員名`**

```java
public class OutClass {  
    private int n = 100;  
    private void m() {  
        System.out.println("Outer m()");  
    }  
  
    private void call() {  
        class InClass {  
            private int n = 55;  // 重名
            private void m2() {  
                m();  // 調用外部方法
                System.out.println("In m2(): return " + (OutClass.this.n + n));  
            }  
        }  
        InClass inClass = new InClass();  
        inClass.m2();  
    }  
  
    public static void main(String[] args) {  
        OutClass outClass = new OutClass();  
        outClass.call();  
    }  
}
```

### 匿名內部類
該類沒有名稱，其本質是對象，用於快速實現只使用一次的 interface 或者 abstract class，用於簡化實現該類並建立實例的過程，該類的類名由編譯器分配，為一種語法糖。

```java
package com.liam;  

// 建立 interface
interface IUsb {  
    void plugin();  
    void plugout();  
}  


public class Computer {  
    public void runUsb(IUsb usb) {  
        usb.plugin();  
        System.out.println("USB is running");  
        usb.plugout();  
    }  
	// 使用匿名內部類
    public static void main(String[] args) {  
        Computer computer = new Computer();  
        computer.runUsb(new IUsb() {  
            @Override  
            public void plugin() {  
                System.out.println("liam's usb plugin");  
            }  
  
            @Override  
            public void plugout() {  
                System.out.println("liam's usb plugout");  
            }  
        });  
    }  
}
```

### 成員內部類
很簡單故skip...

### 靜態內部類
概念與靜態成員一致，很簡單故skip...