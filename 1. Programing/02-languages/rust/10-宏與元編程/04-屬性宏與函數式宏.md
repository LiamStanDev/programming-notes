# å±¬æ€§å®èˆ‡å‡½æ•¸å¼å®

> åŸºæ–¼ Rust 1.90+ (2025) | éˆæ´»çš„ä»£ç¢¼è½‰æ›

## ğŸ“‹ æ¦‚è¿°

å±¬æ€§å®å’Œå‡½æ•¸å¼å®æä¾›äº†æ¯” derive å®æ›´éˆæ´»çš„ä»£ç¢¼ç”Ÿæˆèƒ½åŠ›ã€‚æœ¬ç« ä»‹ç´¹å®ƒå€‘çš„å¯¦ç¾å’Œæ‡‰ç”¨å ´æ™¯ã€‚

---

## ğŸ¯ å±¬æ€§å®

### åŸºæœ¬çµæ§‹

```rust
#[proc_macro_attribute]
pub fn route(attr: TokenStream, item: TokenStream) -> TokenStream {
    // attr: å±¬æ€§åƒæ•¸
    // item: è¢«æ¨™è¨»çš„é …ç›®
}
```

### å¯¦æˆ°ç¯„ä¾‹: Web è·¯ç”±

```rust
use proc_macro::TokenStream;
use quote::quote;
use syn::{parse_macro_input, ItemFn, LitStr};

#[proc_macro_attribute]
pub fn route(attr: TokenStream, item: TokenStream) -> TokenStream {
    let path = parse_macro_input!(attr as LitStr);
    let func = parse_macro_input!(item as ItemFn);
    let func_name = &func.sig.ident;
    
    let expanded = quote! {
        #func
        
        inventory::submit! {
            Route {
                path: #path,
                handler: #func_name,
            }
        }
    };
    
    TokenStream::from(expanded)
}
```

---

## ğŸ”§ å‡½æ•¸å¼å®

### SQL DSL ç¯„ä¾‹

```rust
#[proc_macro]
pub fn sql(input: TokenStream) -> TokenStream {
    // è§£æ SQL èªæ³•
    // ç”Ÿæˆå°æ‡‰çš„ Rust ä»£ç¢¼
}
```

---

*æœ€å¾Œæ›´æ–°: 2025-01-17*  
*Rust ç‰ˆæœ¬: 1.90+*
