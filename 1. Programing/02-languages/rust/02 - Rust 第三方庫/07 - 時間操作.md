# chrono
---
## 介紹
Rust 時間操作有兩個主要的庫 - 標準庫與 chrono 庫：
* 標準庫中 `std::time::{Duration, Instant}` 用於計算時間點與時間區間，常用於計算運行時間，獲取時間區間 e.g. `Duration::from_seconds(3)`。
* chrono 庫用來處理日期時間並考慮時區，功能更強大。

## 使用
### 標準庫
```rust
use std::time::{Duration, Instant};

fn main() {
	let start = Instant::now();
	expensive_fun();
	let duration = start.elapsed();
	println!("Time: {}", duration);
}
```

### chrono 庫
#### Time Delta
`chrono::TimeDelta` 為之前的 `chrono::Duration`，用來表是時間差值，可以透過以下兩個函數與 `std::Duration` 交互
* `TimeDelta::from_std`
* `TimeDelta::to_std`

#### Date and Time
`DateTime` 是考慮時區的物件，必須透過 `TimeZone` 建立，有三種 `TimeZone` 的實現：
* `Utc`: UTC 時區，也是最有效率的
* `Local`: 直接使用系統時區
* `FixedOffset`: 透過與 UTC 時區加減後的時區

> `NaiveDate` 是不考慮時區的物件

##### now
```rust
use chrono::prelude::*;

let utc: DateTime<Utc> = Utc::now(); // e.g. `2014-11-28T12:45:59.324310806Z`
let local: DateTime<Local> = Local::now(); // e.g. `2014-11-28T21:45:59.324310806+09:00`
```
##### create by your own
```rust
let dt = Utc.with_ymd_and_hms(2014, 7, 8, 9, 10, 11).unwrap(); // `2014-07-08T09:10:11Z`
```
#### Formatting and Parsing

##### Formatting
```rust
assert_eq!(dt.format("%Y-%m-%d %H:%M:%S").to_string(), "2014-11-28 12:00:09");
```
##### Parsing
###### From String
`DateTime<Utc>`, `DateTime<FixedOffset>`, `DateTime<Local>` 都有實做 `FromStr` trai (有 `parse` 方法)
```rust
let dt = "2014-11-28T12:00:09Z".parse::<DateTime<Utc>>().unwrap();
```
###### From EPOCH timestamps
這是用於 UNIX timestamp，也就是從 1970/1/1 號開始過了幾秒/納秒
* `from_timestamp(seconds, nanoseconds)`
```rust
// 取得 DateTime<Utc>
let dt: DateTime<Utc> = DateTime::from_timestamp(1_500_000_000, 0).unwrap();

// 取得 EPOCH timestamp
let timestamp: i64 = dt.timestamp();
```