# 切片
---
### 切片的意義
切片是讓我們**在不獲得所有權的情況下，獲得集合中部份的連續序列**。所以切片不會獲得所有權。
切片的表現形式，如 `&str`、`&[i32]` 與 `&[u8]`，因為不會獲得所有權，所以類型都是以引用 `&` 作為前墜。

#### Why 不獲取所有權 ?
若我們使用 `[u8]` 來獲取部分元素。
```rust
let nums: [i32; 4] = [1, 2, 3, 4];
let sub: [i32] = nums[1..3];
``` 
這樣無法進行編譯:
1. 概念上: nums 握有是一個連續數組的所有權，若 sub 真的可以拿走一部分所有權，則 nums 類型就不應該是 `[i32, 4]` 因為它並沒有連續區塊的所有權。
2. 編譯上: 錯誤如下
```text
error[E0277]: the size for values of type `[i32]` cannot be known at compilation time
 --> src/main.rs:3:9
  |
3 |     let sub: [i32] = nums[1..3];
  |         ^^^ doesn't have a size known at compile-time
  |
  = help: the trait `Sized` is not implemented for `[i32]`
  = note: all local variables must have a statically known size
  = help: unsized locals are gated as an unstable feature
help: consider borrowing here
  |
3 |     let sub: &[i32] = nums[1..3];
  |              +
```
* 無法在編譯時期確定 `[i32]` 的大小?
	首先 `[i32]` 是一個陣列，但與 `[i32, 4]` 不同在於並不知道 size 大小，也就是說我們使用了一個 size 大小未知的陣列，在編譯時期未知大小的東西，在 Rust 中不被允許的，也就是說語法上存在 `[i32]` 但不給你用。

#### 切片、陣列與引用哪裡不同 ?
* 切片: 為借用的概念，本身是一個棧上的寬引用類型 (除了引用第一個位置，還包含了大小資訊)。
	* 切片大小為 2 word，參考 [Rust by Example]( https://doc.rust-lang.org/rust-by-example/primitives/array.html#:~:text=Slices%20are%20similar%20to%20arrays,bits%20on%20an%20x86%2D64.)
* 陣列: 為所有權概念，大小已經確定，所有數據都在棧上。
* 引用: 為借用的概念，本身為棧上的引用類型。
