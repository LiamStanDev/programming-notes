> 本章節說明的內容並不是 `Result<T, E>`, Result 也並沒有要求 E 是實現標準庫的 `error::Error` trait，本章專注於實現標準化錯誤類型，始得錯誤處理更加統一。

# 返回多種錯誤

### 方式一：返回 `dyn error::Error`
```rust
fn parse_file(filename: &str) -> Result<i32, Box<dyn error::Error>> {
    let s = fs::read_to_string(filename)?;
    let i = s.parse()?;
    Ok(i)
}
```

### 方式二：自定義錯誤包裹
優點是調用方可以清楚知道錯誤種類
```rust
fn main() {
    let i = parse_file("numbers.txt");

    match i {
        Ok(i) => println!("{i}"),
        Err(e) => match e {
            ParseFileError::File => {}
            ParseFileError::Parse(e) => {}
        },
    }
}

enum ParseFileError {
    File,
    Parse(ParseIntError),
}

fn parse_file(filename: &str) -> Result<i32, ParseFileError> {
    let s = fs::read_to_string(filename).map_err(|_e| ParseFileError::File)?;
    let i = s.parse().map_err(|e| ParseFileError::Parse(e))?;
    Ok(i)
}
```

# 可恢復錯誤
### 錯誤困難點
* Defining
* Propagating (向上傳播): [[#返回多種錯誤 | 請見]]
* Error Handling & Discarding (**Machine 層面**): 決定 Error 發生後的控制流
* Reporting (**User 層面**): 
	* User facing report
	* Developer facing report


### `error::Error` trait

```rust
pub trait Error: Debug + Display {
	fn source(&self) -> Option<&(dyn Error + 'static)> {}
}
```
* `Display`: 用於讓使用者看的懂, `Debug`: 用於讓開發者看得懂